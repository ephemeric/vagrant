# dpkgbuild

## Packages

debmake

## Setup.

I can't remember all the steps but `dh_make` created `debian/*.ex` files. See `man debmake`.

Edit debian/{control,changelog,rules,slob.*}, possibly some others.

The debian/slob dir is auto created.

Service unit files are copied into debian/ (see debian/rules for overrides).

Write build.sh and tests.sh.

Copy slob-init and share between rpmbuild and dpkgbuild repos (for now).

Massive delay in trying to ascertain why no files were in `debian/.debhelper/generated/slob/*`!

As a result, no autogenerated `systemd` section in `debian/slob/DEBIAN/prerm`, causes not killed/stopped process after `dpkg -r`:

In `debian/slob.prerm` the `#DEBHELPER#` token is replaced with:

```

# dh_installdeb will replace this with shell code automatically
# generated by other debhelper scripts.
# Automatically added by dh_installsystemd/13.6ubuntu1
if [ -z "${DPKG_ROOT:-}" ] && [ "$1" = remove ] && [ -d /run/systemd/system ] ; then
	deb-systemd-invoke stop 'slob.service' >/dev/null || true
fi
# End automatically added section
exit 0
```

Run `build.sh` which is self-documenting.
